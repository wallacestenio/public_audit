/* ===========================
   Base UI
   =========================== */
:root{
  --bg:#f6f7f9; --card:#fff; --bd:#e3e6ea; --bd2:#ccd1d6;
  --tx:#111827; --muted:#6b7280; --btn:#0d6efd; --btnh:#0b5ed7;
  --btn2:#64748b; --btn3:#94a3b8; --info:#0ea5e9;
  --success-bg:#d1fae5; --success-bd:#10b981; --success-tx:#065f46;
  --danger-bg:#fee2e2; --danger-bd:#ef4444; --danger-tx:#b91c1c;
}

*{ box-sizing:border-box }

body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  margin:24px;
  background:var(--bg);
  color:var(--tx);
}

.card{
  background:var(--card);
  border:1px solid var(--bd);
  border-radius:8px;
  padding:20px;
  max-width:1000px;
  margin:0 auto;
}

.row{ display:flex; flex-wrap:wrap; gap:12px }
.col{ flex:1 1 300px; min-width:300px }
.col-full{ flex-basis:100%; min-width:100% }

label{ font-weight:600; display:block; margin:6px 0 }

input,select,textarea{
  width:100%;
  padding:10px;
  border:1px solid var(--bd2);
  border-radius:6px;
  background:#fff;
}

button,.btn{
  padding:10px 16px;
  border:0;
  background:var(--btn);
  color:#fff;
  border-radius:6px;
  cursor:pointer;
  text-decoration:none;
  display:inline-block;
}

button:hover,.btn:hover{ background:var(--btnh) }

.muted{ color:var(--muted); font-size:13px; margin-top:4px }

.actions{ display:flex; gap:8px; flex-wrap:wrap; margin-top:16px }
.actions .btn-gray{ background:var(--btn2) }
.actions .btn-light{ background:var(--btn3) }
.btn-info{ background:var(--info) }

.center{ text-align:center }
.justify-block{ margin-top:4px }

@media (max-width:680px){ .col{ min-width:100% } }

/* ===========================
   Alerts
   =========================== */
.alert{
  padding:15px;
  border-radius:6px;
  font-size:16px;
  margin-bottom:12px;
  border:1px solid transparent
}
.alert-success{ background:var(--success-bg); border-color:var(--success-bd); color:var(--success-tx) }
.alert-danger{  background:var(--danger-bg);  border-color:var(--danger-bd);  color:var(--danger-tx) }

/* ===========================
   Erros de Campo
   =========================== */
.field-error{ color:var(--danger-tx); font-size:13px; margin-top:4px; }

/* ===========================
   Botões segmentados (radios)
   =========================== */
.segmented{ display:flex; gap:8px; flex-wrap:wrap; align-items:stretch; min-height:42px; }
.segmented > input[type="radio"]{ position:absolute; opacity:0; pointer-events:none; }
.segmented-btn{
  flex:1 1 0; min-width:60px; text-align:center;
  background:#e5e7eb; border:1px solid #cbd5e1;
  border-radius:6px; font-weight:600; cursor:pointer; user-select:none;
  transition:background .15s ease, border-color .15s ease, color .15s ease, transform .05s ease;
  height:42px; line-height:22px; display:flex; justify-content:center; align-items:center; padding:0;
}
.segmented-btn:hover{ background:#d1d5db; }
.segmented > input[type="radio"]:checked + .segmented-btn{
  background:#0d6efd; color:#fff; border-color:#0d6efd;
}
.segmented > input[type="radio"]:focus + .segmented-btn{
  outline:3px solid rgba(13,110,253,.35); outline-offset:2px;
}
.segmented-btn:active{ transform:scale(.98); }

@media (max-width:980px){
  .segmented{ flex-wrap:wrap; }
  .segmented-btn{ min-width:calc(25% - 6px); }
}
@media (max-width:680px){
  .segmented-btn{ min-width:48%; }
}

/* ===========================
   TAG GROUP (justificativas)
   =========================== */
.tag-input{
  width:100%; padding:10px; border:1px solid var(--bd2); border-radius:6px;
  background:#fff; margin-bottom:6px;
}
.preset-wrap{
  border:1px solid var(--bd2); border-radius:6px; background:#fff;
  padding:8px; max-height:260px; overflow:auto; margin-bottom:6px;
}
.preset-group{ padding:6px 4px; border-top:1px solid #eef2f7; }
.preset-group:first-child{ border-top:none; }
.preset-title{
  font-weight:700; font-size:13px; color:#64748b; text-transform:uppercase; letter-spacing:.02em; margin:6px 2px;
}
.preset-list{ display:flex; flex-wrap:wrap; gap:8px; }

.preset-badge{
  display:inline-flex; align-items:center; justify-content:center;
  padding:6px 10px; border-radius:20px; border:1px solid #cbd5e1; background:#f8fafc;
  color:#0f172a; cursor:pointer; user-select:none; transition:background .15s ease, border-color .15s ease, color .15s ease;
}
.preset-badge:hover{ background:#eef2f7; border-color:#94a3b8; }

.tag-chips{ display:flex; flex-wrap:wrap; gap:8px; }
.tag-chip{
  --chip-bg:#eef2f7; --chip-bd:#cbd5e1; --chip-tx:#0f172a;
  --chip-x-bg:#e2e8f0; --chip-x-tx:#334155; --chip-x-bg-hover:#e11d48; --chip-x-tx-hover:#ffffff;
  display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border:1px solid var(--chip-bd);
  background:var(--chip-bg); color:var(--chip-tx); border-radius:999px; line-height:1; font-size:14px;
  box-shadow:0 1px 0 rgba(15,23,42,.05);
}
.tag-chip .x{
  display:inline-flex; align-items:center; justify-content:center; width:20px; height:20px; border-radius:50%;
  border:1px solid var(--chip-bd); background:var(--chip-x-bg); color:var(--chip-x-tx); cursor:pointer; line-height:1;
  font-weight:700; font-size:14px; padding:0; transition:background .15s ease, color .15s ease, transform .08s ease, border-color .15s ease;
  -webkit-appearance:none; appearance:none;
}
.tag-chip .x:hover{ background:var(--chip-x-bg-hover); border-color:var(--chip-x-bg-hover); color:var(--chip-x-tx-hover); }
.tag-chip .x:focus{ outline:3px solid rgba(14,165,233,.35); outline-offset:1px; }
.tag-chip .x:active{ transform:scale(.94); }

/* ===========================
   Dropdowns dos autocompletes
   =========================== */
#auditor_suggest, #inspector_suggest, #supplier_suggest,
#location_suggest, #category_suggest, #resolver_suggest{
  position:absolute; top:100%; left:0; right:0;
  background:#fff; border:1px solid var(--bd2); border-radius:6px;
  box-shadow:0 8px 20px rgba(0,0,0,.08);
  max-height:260px; overflow:auto; z-index:9999; display:none; padding:6px;
}

/* ===========================
   SANFONA DE EXPORTAÇÃO
   =========================== */
.export-accordion { display:block; }
.export-toggle{
  background: var(--btn3);
  color:#fff;
  display:flex; align-items:center; gap:10px;
}
.export-toggle:hover { background: #7b8aa3; }
.export-toggle .chev{
  margin-left:auto;
  display:inline-block;
  transition: transform .18s ease;
}
.export-toggle[aria-expanded="true"] .chev{
  transform: rotate(-180deg);
}
.export-toggle[aria-expanded="false"] .label-open { display:none; }
.export-toggle[aria-expanded="true"]  .label-closed { display:none; }
.export-toggle[aria-expanded="true"]  .label-open { display:inline; }

.export-panel{
  border:1px solid var(--bd2);
  border-radius:8px;
  background:#fff;
  margin-top:8px;
  padding:10px;
  box-shadow:0 6px 16px rgba(0,0,0,.06);
  overflow:hidden;
  transition: opacity .15s ease;
  opacity:1;
}
.export-panel[hidden]{
  display:block; /* permite animar opacity mantendo layout controlado */
  opacity:0;
  height:0; padding-top:0; padding-bottom:0; border-width:0; box-shadow:none;
}
:root{
  --bg:#f6f7f9; --card:#fff; --bd:#e3e6ea; --bd2:#ccd1d6;
  --tx:#111827; --muted:#6b7280; --btn:#0d6efd; --btnh:#0b5ed7;
  --btn2:#64748b; --btn3:#94a3b8; --info:#0ea5e9;
  --success-bg:#d1fae5; --success-bd:#10b981; --success-tx:#065f46;
  --danger-bg:#fee2e2; --danger-bd:#ef4444; --danger-tx:#b91c1c;
}

*{ box-sizing:border-box }

body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  margin:24px;
  background:var(--bg);
  color:var(--tx);
}

.container { max-width: 1100px; margin: 0 auto; }

.card{
  background:var(--card);
  border:1px solid var(--bd);
  border-radius:8px;
  padding:20px;
  max-width:1000px;
  margin:0 auto;
}

.row{ display:flex; flex-wrap:wrap; gap:12px }
.col{ flex:1 1 300px; min-width:300px }
.col-full{ flex-basis:100%; min-width:100% }

label{ font-weight:600; display:block; margin:6px 0 }

input,select,textarea{
  width:100%;
  padding:10px;
  border:1px solid var(--bd2);
  border-radius:6px;
  background:#fff;
}

button,.btn{
  padding:10px 16px;
  border:0;
  background:var(--btn);
  color:#fff;
  border-radius:6px;
  cursor:pointer;
  text-decoration:none;
  display:inline-block;
}

button:hover,.btn:hover{ background:var(--btnh) }
.muted{ color:var(--muted); font-size:13px; margin-top:4px }

.actions{ display:flex; gap:8px; flex-wrap:wrap; margin-top:16px }
.actions .btn-gray{ background:var(--btn2) }
.actions .btn-light{ background:var(--btn3) }
.btn-info{ background:var(--info) }

.center{text-align:center}
.justify-block{margin-top:4px}
@media (max-width:680px){ .col{min-width:100%} }

/* Alerts */
.alert{padding:15px;border-radius:6px;font-size:16px;margin-bottom:12px;border:1px solid transparent}
.alert-success{background:var(--success-bg);border-color:var(--success-bd);color:var(--success-tx)}
.alert-danger{background:var(--danger-bg);border-color:var(--danger-bd);color:var(--danger-tx)}

/* Botões segmentados (radios) */
.segmented{ display:flex; gap:8px; flex-wrap:wrap; align-items:stretch; min-height:42px; }
.segmented > input[type="radio"]{ position:absolute; opacity:0; pointer-events:none; }
.segmented-btn{
  flex:1 1 0; min-width:60px; text-align:center;
  background:#e5e7eb; border:1px solid #cbd5e1;
  border-radius:6px; font-weight:600; cursor:pointer; user-select:none;
  transition:background .15s ease, border-color .15s ease, color .15s ease, transform .05s ease;
  height:42px; line-height:22px; display:flex; justify-content:center; align-items:center; padding:0;
}
.segmented-btn:hover{ background:#d1d5db; }
.segmented > input[type="radio"]:checked + .segmented-btn{
  background:#0d6efd; color:#fff; border-color:#0d6efd;
}
.segmented > input[type="radio"]:focus + .segmented-btn{
  outline:3px solid rgba(13,110,253,.35); outline-offset:2px;
}
.segmented-btn:active{ transform:scale(.98); }
@media (max-width:980px){ .segmented{ flex-wrap:wrap; } .segmented-btn{ min-width:calc(25% - 6px);} }
@media (max-width:680px){ .segmented-btn{ min-width:48%; } }

/* TAG GROUP (justificativas) */
.tag-input{ width:100%; padding:10px; border:1px solid var(--bd2); border-radius:6px; background:#fff; margin-bottom:6px; }
.preset-wrap{ border:1px solid var(--bd2); border-radius:6px; background:#fff; padding:8px; max-height:260px; overflow:auto; margin-bottom:6px; }
.preset-group{ padding:6px 4px; border-top:1px solid #eef2f7; }
.preset-group:first-child{ border-top:none; }
.preset-title{ font-weight:700; font-size:13px; color:#64748b; text-transform:uppercase; letter-spacing:.02em; margin:6px 2px; }
.preset-list{ display:flex; flex-wrap:wrap; gap:8px; }
.preset-badge{
  display:inline-flex; align-items:center; justify-content:center;
  padding:6px 10px; border-radius:20px; border:1px solid #cbd5e1; background:#f8fafc;
  color:#0f172a; cursor:pointer; user-select:none; transition:background .15s ease, border-color .15s ease, color .15s ease;
}
.preset-badge:hover{ background:#eef2f7; border-color:#94a3b8; }

.tag-chips{ display:flex; flex-wrap:wrap; gap:8px; }
.tag-chip{
  --chip-bg:#eef2f7; --chip-bd:#cbd5e1; --chip-tx:#0f172a;
  --chip-x-bg:#e2e8f0; --chip-x-tx:#334155; --chip-x-bg-hover:#e11d48; --chip-x-tx-hover:#ffffff;
  display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border:1px solid var(--chip-bd);
  background:var(--chip-bg); color:var(--chip-tx); border-radius:999px; line-height:1; font-size:14px;
  box-shadow:0 1px 0 rgba(15,23,42,.05);
}
.tag-chip .x{
  display:inline-flex; align-items:center; justify-content:center; width:20px; height:20px; border-radius:50%;
  border:1px solid var(--chip-bd); background:var(--chip-x-bg); color:var(--chip-x-tx); cursor:pointer; line-height:1;
  font-weight:700; font-size:14px; padding:0; transition:background .15s ease, color .15s ease, transform .08s ease, border-color .15s ease;
  -webkit-appearance:none; appearance:none;
}
.tag-chip .x:hover{ background:var(--chip-x-bg-hover); border-color:var(--chip-x-bg-hover); color:var(--chip-x-tx-hover); }
.tag-chip .x:focus{ outline:3px solid rgba(14,165,233,.35); outline-offset:1px; }
.tag-chip .x:active{ transform:scale(.94); }

/* Dropdowns (autocompletes) */
#auditor_suggest, #inspector_suggest, #supplier_suggest,
#location_suggest, #category_suggest, #resolver_suggest{
  position:absolute; top:100%; left:0; right:0;
  background:#fff; border:1px solid var(--bd2); border-radius:6px;
  box-shadow:0 8px 20px rgba(0,0,0,.08);
  max-height:260px; overflow:auto; z-index:9999; display:none; padding:6px;
}

/* ===== SANFONA: Opções de exportação ===== */
.export-accordion { display:block; margin-top:12px; }

.export-toggle{
  background: var(--btn3);
  color:#fff;
  display:flex; align-items:center; gap:10px;
}
.export-toggle:hover { background: #7b8aa3; }
.export-toggle .chev{
  margin-left:auto;
  display:inline-block;
  transition: transform .18s ease;
}
.export-toggle[aria-expanded="true"] .chev{
  transform: rotate(-180deg);
}
.export-toggle[aria-expanded="false"] .label-open { display:none; }
.export-toggle[aria-expanded="true"]  .label-closed { display:none; }
.export-toggle[aria-expanded="true"]  .label-open { display:inline; }

.export-panel{
  border:1px solid var(--bd2);
  border-radius:8px;
  background:#fff;
  margin-top:8px;
  padding:10px;
  box-shadow:0 6px 16px rgba(0,0,0,.06);
  overflow:hidden;
  transition: opacity .15s ease;
  opacity:1;
}
.export-panel[hidden]{
  display:block; /* permite transição suave */
  opacity:0;
  height:0; padding-top:0; padding-bottom:0; border-width:0; box-shadow:none;
}